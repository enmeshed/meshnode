// Log to OpenTracing when a trace is active.
import { LogWriter } from './Logging'

export class OpenTracingLogWriter extends LogWriter:
  writeToLog(data): void ->
    ctx = getContext()
    span = ctx.openTracingSpan
    if not span: return

    rec = Object.assign({}, data)
    time = rec.time
    delete rec.time

    span.log(rec, time)

    Promise.resolve(undefined)
